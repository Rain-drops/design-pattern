# 模板方法模式 (Template Method Pattern)

## 概述
定义：定义一个算法中的操作框架，而将一些步骤延迟到子类中。使得子类可以不改变算法的结构即可重定义该算法的某些特定步骤。  
模板模式首先要有一个抽象类，这个抽象类公开定义了执行它的方法的方式/模板。
它的子类可以按需要重写方法实现，但调用将以抽象类中定义的方式进行。这种类型的设计模式属于行为型模式。  

模板方法的实现条件注意：  
（1）必须是一个抽象类。  
（2）抽象类有一个模板方法，其中定义了算法骨架。  
（3）为了防止恶意操作，模板方法必须加上final关键词。  
（4）模板方法中除了复用的代码，其他的关键代码必须是抽象的，子类可以继承实现。  

优点  
（1）它封装了不变部分，扩展可变部分。它把认为是不变部分的算法封装到父类中实现，而把可变部分算法由子类继承实现，便于子类继续扩展。  
（2）它在父类中提取了公共的部分代码，便于代码复用。  
（3）部分方法是由子类实现的，因此子类可以通过扩展方式增加相应的功能，符合开闭原则。  
缺点  
（1）对每个不同的实现都需要定义一个子类，这会导致类的个数增加，系统更加庞大，设计也更加抽象。  
（2）父类中的抽象方法由子类实现，子类执行的结果会影响父类的结果，这导致一种反向的控制结构，它提高了代码阅读的难度。  

敲重点：不变的是顺序；变化的是执行的内容  

## 结构图


## 角色


## 使用场景
Spring：事务管理【AbstractPlatformTransactionManager.getTransaction()】  
Spring：Bean的实例化注入，具体体现为模板方法：【AbstractApplicationContext.refresh()】

## 源码解析